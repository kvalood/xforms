
Обсуждение и скриншоты тут - http://forum.imagecms.net/viewtopic.php?id=4988

### Конструктор форм - xforms для ImageCMS

## Обратите внимание!
Файлы модуля должны находиться в папке /application/modules/xforms

Модуль корректно работает с **ImageCMS** версий **от 4.9 до 4.12**

## Что сделано?
* Отправка почты на несколько email адресов.
* Отправка почты работает через модуль "Управление email-уведомлениями"
* Все формы на AJAX и отправляются без перезагрузки страницы.
* Теперь поля формы можно включать/выключать.
* Переписан дизайн админ панели для формы, теперь нет глюков.
* Добавлена функция запрета прямого доступа к форме через УРЛ. (не путать с запретом доступа к модулю через УРЛ)
* Добавлена функция прикрепления файлов к форме. (нужно создать поле "загрузка файла")
* Форму мы можем встроить как виджет, но перейдя по ссылке формы, будет 404 ошибка.
* Добавнена функция "защитный код (каптча)". Если в форме есть ошибки, капча автоматически обноавляется.
* Уведомление об ошибках "на лету", т.е. если вы ввели что то неправильно в поле, вылазит уведомление об ошибке (после нажатия на кнопку отправить)
* Есть такой мифический тип поля, "разделитель". Нужен например для визуального отделения мелких групп полей. Не стал заморачиваться с fieldset и legend. Возможно в будущем поля будут иметь доп. свойство - группировка.
* Вырезать лишний JS нотификации при отправке письма, и добавлены пользовательские функции. Подробнее тут - http://forum.imagecms.net/viewtopic.php?pid=26212#p26212 (все по разному хотят выводить нотификации и другие действия с формой после её отправки)

## Баги
* При загрузке файла PSD, всегда пишет - "не верный тип файла", причем пробовал заменить mimes.php из codegniter 3 версии, все равно ругается. Пока не думал как решать.
* Если на странице больше двух форм, и включена каптча в формах, то в первой форме будет не верное изображение каптчи

### Что в планах? (в порядке убывания приоритетов)
* Добавить сортировку по сообщениям в админ панели. (дата создания, статус)
* Сделать общие настройки всех форм. (сохранять сообщения в админ панели или нет)
* Добавление новых типов полей (Телефон, email итд. input'ов из HTML5)
* Добавление поля Time, data и time data. (На основе Js - datetimepicker)
* Добавить поддержку reCaptcha
* Удалять сообщения из админ панели.
* Мультиязычность
* группировка полей в fieldset или что-то подобное.
* Добавить дефолтные стили.
* JS валидация в соответствии с выставленными условиями проверки `(valid_email|max_length[255]|min_length[1]|numeric итд)`


## Обновления:
##### UPD: 21/02/17 - Версия 2.4.0
* Для обновления БД зайдите в админпанель и перейдите по адресу - `/admin/components/cp/xforms/update_2_4/`
* Внесены правки в шаблон отображения формы на клиентской части
* Теперь отправка почты частично работает через модуль "Управление email-уведомлениями". Частично, потому что - https://github.com/imagecms/ImageCMS/issues/103
* Небольшие правки в tpl админ-панели
* Теперь есть возможность выбрать что делать с загруженными файлами. Доступно 3 варианта. 1)Сохранить на сервере. 2)Отправить вложением и удалить с сервера. 3) Отправить вложением и сохранить на сервере. Кому-то будет полезно.
* Теперь сообщения добавляются в админ панель.

##### UPD: 30/01/17
* Исправлена ошибка загрузки скриптов для поля "загрузка файла"

##### UPD: 28/11/16 - Версия 2.3.1
* Загрузка файлов вынесена в отдельный файл xforms_files.js
* FIX: Если в форме нет полей с файлами, то не подгружает скрипты для загрузки файлов.
* Исправления в шаблоне админки.
* Вырезан лишний JS нотификации при отправке письма, добавлен вызов пользовательских функции. Пример тут - http://forum.imagecms.net/viewtopic.php?pid=26212#p26212 (все по разному хотят выводить нотификации и другие действия с формой после её отправки).

##### UPD: 10/11/16
* Ошибки в xforms.js

##### UPD: 04/11/16
* Исправлена ошибка в tpl письма + добавлена функция скачивания файлов

##### UPD: 19/10/16 - Версия 2.3
* Добавил новый тип поля, для формы, - "загрузка файла". Можно загружать файлы через ajax и выбирать какие типы файлов разрешено загружать.
* Теперь можно сделать первое значение `select/checked/radio` выбранным по умолчанию.
* Косметические исправления при редактировании поля в админке.
* checkbox работает как надо

Для обновления модуля с версии 2.0 до 2.3 замените все файлы модуля, а так-же зайдите в админ панель и перейдите по адресу - `/admin/components/cp/xforms/update_2_3/`

##### UPD: 11/06/16
* Теперь работают типы поля checkbox и исправил ошибки в radio
* Модуль будет по умолчанию отправлять письсма через SMTP если он у вас настроен.

##### UPD: 11/05/16
* При создании поля, его позиция по умолчанию = ID поля, если она не указана. (поле помещается в конец списка)